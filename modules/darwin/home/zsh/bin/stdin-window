#!/bin/bash

height=20
title="Log Viewer"
title_align="center"
window_color="default"

while [[ $# -gt 0 ]]; do
    case $1 in
        --height)
            height="$2"
            shift 2
            ;;
        --title)
            title="$2"
            shift 2
            ;;
        --title-align)
            title_align="$2"
            shift 2
            ;;
        --window-color)
            window_color="$2"
            shift 2
            ;;
        *)
            shift
            ;;
    esac
done

tput civis
trap "tput cnorm; clear; exit" INT TERM EXIT

draw_border() {
    local width=$(tput cols)
    local top_border="╭$(printf '─%.0s' $(seq 1 $((width - 2))))╮"
    local bottom_border="╰$(printf '─%.0s' $(seq 1 $((width - 2))))╯"
    local padding=$(( (width - ${#title} - 2) / 2 ))

    echo -e "\033[${window_color}m"
    echo "$top_border"

    if [[ "$title_align" == "center" ]]; then
        printf "│%*s%s%*s│\n" "$padding" "" "$title" "$padding" ""
    elif [[ "$title_align" == "left" ]]; then
        printf "│ %s%*s│\n" "$title" $((width - ${#title} - 3)) ""
    elif [[ "$title_align" == "right" ]]; then
        printf "│%*s%s │\n" $((width - ${#title} - 3)) "" "$title"
    fi

    echo "$bottom_border"
    echo -e "\033[0m"
}

main() {
    while IFS= read -r line; do
        clear
        draw_border
        echo "$line"
    done
}

main
