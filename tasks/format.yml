# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

tasks:
  nix:
    desc: Format all Nix files using nixfmt
    cmds:
      - hack/fmt-nix.sh

  nix:check:
    desc: Check Nix formatting without modifying files
    cmds:
      - hack/fmt-nix-check.sh

  lua:
    desc: Format all Lua files using stylua
    cmds:
      - hack/fmt-lua.sh

  lua:check:
    desc: Check Lua formatting without modifying files
    cmds:
      - hack/fmt-lua-check.sh

  lua:lint:
    desc: Run lua-language-server diagnostics on all Lua files
    cmds:
      - hack/fmt-lua-lint.sh

  lua:validate:
    desc: Validate Lua code (format check + LSP diagnostics)
    deps: [lua:check, lua:lint]
    cmds:
      - echo "Lua validation complete"
    silent: true

  sh:
    desc: Format all shell files using shfmt
    cmds:
      - hack/fmt-sh.sh

  sh:check:
    desc: Check shell formatting without modifying files
    cmds:
      - hack/fmt-sh-check.sh

  all:
    desc: Format all supported file types (Nix, Lua, Shell)
    deps: [nix, lua, sh]
    silent: true

  all:check:
    desc: Check formatting for all file types without modifying
    deps: [nix:check, lua:check, sh:check]
    cmds:
      - echo "All formatting checks passed"
    silent: true
